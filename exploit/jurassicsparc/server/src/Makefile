CC=gcc
CFLAGS=-O -pie -fPIE -fstack-protector-all -Wl,-z,relro,-z,now -Wall -Wno-unused-result -m32 -z noexecstack
LDFLAGS=-lcrypto

#-D_FORTIFY_SOURCE=2
jurassic_SRCS = jurassic.c utils.c commands.c server.h
jurassic_OBJS = $(jurassic_SRCS:.c=.o)

all: jurassic

.c.o:
	$(CC) $(CFLAGS) -c $< -o $@

jurassic: $(jurassic_OBJS)
	$(CC) $(CFLAGS) $(LDFLAGS) $^ -o $@
	strip $@

.PHONY: clean

clean:
	rm -f *.o
	rm -f jurassic
